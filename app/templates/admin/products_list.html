{% extends "admin/base_admin.html" %}
{% block title %}Products{% endblock %}
{% block content %}
<div class="flex items-center justify-between mb-6">
    <h1 class="text-3xl font-bold">Products</h1>
    <a href="/admin/products/new" class="btn-primary gap-2 inline-flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
        Add Product
    </a>
</div>

<div class="table-wrapper">
    <table class="styled">
        <thead>
            <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Category</th>
                <th>Visible</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
                <td>
                    {% if product.images %}
                    <img src="{{ product.images[0].url }}" alt="{{ product.name }}" class="w-12 h-12 object-cover rounded">
                    {% else %}
                    <div class="w-12 h-12 bg-[hsl(var(--muted))] rounded"></div>
                    {% endif %}
                </td>
                <td class="font-medium">{{ product.name }}</td>
                <td>{{ product.price|format_price }}</td>
                <td>
                    <span class="{% if product.stock < 5 %}badge-destructive{% else %}badge-secondary{% endif %}">{{ product.stock }}</span>
                </td>
                <td>{{ product.category or "\u2014" }}</td>
                <td>{{ "Yes" if product.visible else "No" }}</td>
                <td>
                    <div class="flex gap-2">
                        <a href="/admin/products/{{ product.id }}" class="btn-outline btn-sm">Edit</a>
                        <form action="/admin/products/{{ product.id }}/delete" method="POST" onsubmit="return confirm('Delete {{ product.name }}?')">
                            <button type="submit" class="btn-destructive btn-sm">Delete</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
            {% if not products %}
            <tr>
                <td colspan="7" class="text-center text-[hsl(var(--muted-foreground))] py-8">No products yet.</td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}
